<div class="container my-5">

  <div class="row mb-4">
    <div class="col text-center">
      <h1 class="display-4 text-primary"><%= @quiz.topic %> Quiz</h1>
      <p class="lead text-muted">Difficulty: <%= @quiz.difficulty %></p>
      <p class="lead text-muted">Study Duration: <%= @quiz.study_duration %> seconds</p>
      <p class="lead text-muted">Detail Level: <%= @quiz.detail_level %></p>
      <p class="lead text-muted">Number of Questions: <%= @quiz.number_of_questions %></p>
    </div>
  </div>

  <%= form_with url: "/quizzes/#{@quiz.id}/submit", method: :post, class: 'needs-validation' do |f| %>
    <% @quiz.questions.each_with_index do |question, i| %>
      <% question_class = '' %>
      
      <div class="mb-3">
        <p class="font-weight-bold <%= question_class %>">Q <%= i + 1 %>) <%= question.content %></p>
        <p class="text-muted">select ONE</p>
        <% JSON.parse(question.options).each_with_index do |option, j| %>
          <div class="form-check">
            <label class="form-check-label">
              <input type="radio" name="answers[<%= question.id %>]" value="<%= option %>" class="form-check-input" required>
              <%= ('a'.ord + j).chr %>) <%= option %>
            </label>
          </div>
        <% end %>
      </div>
    <% end %>

    <div class="text-center">
      <%= f.submit 'Submit Quiz', class: 'btn btn-lg btn-primary' %>
    </div>
  <% end %>
</div>

<!-- Delete button form -->
<%= form_with model: @quiz, method: :delete, local: true do %>
  <button type="submit" onclick="return confirm('Are you sure you want to delete this quiz?')">Delete Quiz</button>
<% end %>

<!-- Display the score after submitting the quiz -->
<% if flash[:notice] %>
  <p><strong><%= flash[:notice] %></strong></p>
<% end %>

<%# TODO: LINK STYLE SHEET %>
<style>
  .form-check-label {
    font-size: 1.1rem;
  }

  .form-check-input {
    margin-top: 0.3rem;
  }

  .btn-primary {
    padding: 1rem 2rem;
    font-size: 1.2rem;
  }
</style>